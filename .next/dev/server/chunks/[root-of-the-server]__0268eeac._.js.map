{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/farooq-ashiru/Desktop/Main_Projects/LearnAnything/src/proxy.ts"],"sourcesContent":["//Named this proxy.ts instead of middleware.ts because new nextjs version deprecated middleware.ts  so un name middleware.ts as proxy.ts\n\nimport { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\nimport { decrypt } from \"./server/utils/session\";\n\n//  Define protected and public routes\nconst protectedRoutes = [\"/dashboard\", \"/profile\", \"/settings\"];\nconst publicRoutes = [\"/signin\", \"/signup\", \"/\"];\n\nexport default async function middleware(req: NextRequest) {\n  //  Check if the current route is protected\n  const path = req.nextUrl.pathname;\n  const isProtectedRoute = protectedRoutes.some((route) =>\n    path.startsWith(route),\n  );\n  const isPublicRoute = publicRoutes.includes(path);\n\n  //  Decrypt the session from the cookie\n  const cookie = req.cookies.get(\"session\")?.value;\n  const session = await decrypt(cookie); // Decrypt the session from the server folder in the src folder\n\n  //  Redirect Logic\n  // in case:  User is NOT logged in and tries to access a protected route\n  if (isProtectedRoute && !session?.accessToken) {\n    return NextResponse.redirect(new URL(\"/signin\", req.nextUrl));\n  }\n\n  // in Case : User IS logged in and tries to access login/register (it optional UX improvement sha)\n  if (isPublicRoute && session?.accessToken && path !== \"/\") {\n    return NextResponse.redirect(new URL(\"/dashboard\", req.nextUrl));\n  }\n\n  return NextResponse.next();\n}\n\n//  Config to prevent middleware from running on static files (images, fonts)\nexport const config = {\n  matcher: [\"/((?!api|_next/static|_next/image|.*\\\\.png$).*)\"],\n};\n"],"names":[],"mappings":";;;;;;AAAA,wIAAwI;AAExI;;;;;;;;AAIA,sCAAsC;AACtC,MAAM,kBAAkB;IAAC;IAAc;IAAY;CAAY;AAC/D,MAAM,eAAe;IAAC;IAAW;IAAW;CAAI;AAEjC,eAAe,WAAW,GAAgB;IACvD,2CAA2C;IAC3C,MAAM,OAAO,IAAI,OAAO,CAAC,QAAQ;IACjC,MAAM,mBAAmB,gBAAgB,IAAI,CAAC,CAAC,QAC7C,KAAK,UAAU,CAAC;IAElB,MAAM,gBAAgB,aAAa,QAAQ,CAAC;IAE5C,uCAAuC;IACvC,MAAM,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC,YAAY;IAC3C,MAAM,UAAU,MAAM,QAAQ,SAAS,+DAA+D;IAEtG,kBAAkB;IAClB,wEAAwE;IACxE,IAAI,oBAAoB,CAAC,SAAS,aAAa;QAC7C,OAAO,0TAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,WAAW,IAAI,OAAO;IAC7D;IAEA,kGAAkG;IAClG,IAAI,iBAAiB,SAAS,eAAe,SAAS,KAAK;QACzD,OAAO,0TAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,IAAI,OAAO;IAChE;IAEA,OAAO,0TAAY,CAAC,IAAI;AAC1B;AAGO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAkD;AAC9D"}}]
}